{% extends "admin/change_list.html" %}

{% block content %}

<h2>Dashboard Statistik Laporan Bullying</h2>

<div style="display:flex; gap:20px; margin-bottom:20px;">
  <div>Total Laporan: <b>{{ total_laporan }}</b></div>
  <div>Baru: <b>{{ laporan_baru }}</b></div>
  <div>Diproses: <b>{{ diproses }}</b></div>
  <div>Selesai: <b>{{ selesai }}</b></div>
</div>

<div style="display:grid; grid-template-columns: 1fr 1fr; gap:30px;">
  <canvas id="statusChart"></canvas>
  <canvas id="jenisChart"></canvas>
  <canvas id="kelasChart"></canvas>
  <canvas id="trenChart"></canvas>
</div>

<hr>

{{ block.super }}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
new Chart(document.getElementById("statusChart"), {
  type: 'pie',
  data: {
    labels: [{% for i in grafik_status %}"{{ i.status }}",{% endfor %}],
    datasets: [{ data: [{% for i in grafik_status %}{{ i.total }},{% endfor %}] }]
  }
});
</script>

<script>
new Chart(document.getElementById("jenisChart"), {
  type: 'bar',
  data: {
    labels: [{% for i in grafik_jenis %}"{{ i.jenis_bullying }}",{% endfor %}],
    datasets: [{ data: [{% for i in grafik_jenis %}{{ i.total }},{% endfor %}] }]
  }
});
</script>

<script>
new Chart(document.getElementById("kelasChart"), {
  type: 'bar',
  data: {
    labels: [{% for i in grafik_kelas %}"{{ i.kelas_korban }}",{% endfor %}],
    datasets: [{ data: [{% for i in grafik_kelas %}{{ i.total }},{% endfor %}] }]
  }
});
</script>

<script>
new Chart(document.getElementById("trenChart"), {
  type: 'line',
  data: {
    labels: [{% for i in grafik_tren %}"{{ i.waktu|date:'M Y' }}",{% endfor %}],
    datasets: [{ data: [{% for i in grafik_tren %}{{ i.total }},{% endfor %}] }]
  }
});
</script>

{% endblock %}
