{% extends "base.html" %}
{% load static %}

{% block title %}Formulir Laporan Perundungan{% endblock %}

{% block content %}
<div class="buat-laporan-page">

  <section class="buat-laporan-hero">
    <div class="container">

      <!-- ================= HEADER ================= -->
      <div class="text-center">
        <h1 class="hero-title">Formulir Laporan Perundungan</h1>
        <p class="hero-subtitle">
          Isi laporan sesuai kejadian yang dialami atau disaksikan
        </p>
      </div>

      <div class="form-card mx-auto mt-5">

        <img src="{% static 'img/ribbon.png' %}" class="form-icon">
        <h3 class="form-title">Laporan Perundungan Siswa</h3>

        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}

          <!-- ================= IDENTITAS PELAPOR ================= -->
          <div class="form-section">
            <h5 class="section-title">Identitas Pelapor</h5>
            <p class="section-desc">
              Informasi pelapor bersifat rahasia
            </p>

            <div class="mb-3">
              <label class="form-label">Nama Pelapor</label>
              <input type="text" class="form-control"
                     value="{{ profile.user.get_full_name|default:profile.user.username }}" readonly>
            </div>

            <div class="mb-3">
              <label class="form-label">NIS</label>
              <input type="text" class="form-control"
                     value="{{ profile.nis }}" readonly>
            </div>

            <div class="mb-3">
              <label class="form-label">Kelas</label>
              <input type="text" class="form-control"
                     value="{{ profile.kelas }}" readonly>
            </div>

            <div class="form-check">
              {{ form.is_anonymous }}
              <label class="form-check-label">
                Laporkan sebagai anonim
              </label>
            </div>
          </div>

          <!-- ================= IDENTITAS KORBAN ================= -->
          <div class="form-section">
            <h5 class="section-title">Identitas Korban</h5>

            <div class="mb-3">
              <label class="form-label">Nama Korban</label>
              {{ form.nama_korban }}
            </div>

            <div class="mb-3">
              <label class="form-label">Kelas Korban</label>
              {{ form.kelas_korban }}
            </div>

            <!-- â­ ANONIM KORBAN -->
            <div class="form-check">
              {{ form.is_korban_anonim }}
              <label class="form-check-label">
                Sembunyikan identitas korban pada tampilan umum
              </label>
            </div>
          </div>

          <!-- ================= IDENTITAS TERLAPOR ================= -->
          <div class="form-section">
            <h5 class="section-title">
              Identitas Terlapor
            </h5>

            <div class="mb-3">
              <label class="form-label">Nama Terlapor</label>
              {{ form.nama_terlapor }}
            </div>

            <div class="mb-3">
              <label class="form-label">Kelas Terlapor</label>
              {{ form.kelas_terlapor }}
            </div>
          </div>

          <!-- ================= JENIS ================= -->
          <div class="form-section">
            <h5 class="section-title">Jenis Perundungan</h5>
            {{ form.jenis_bullying }}
          </div>

          <!-- ================= WAKTU & TEMPAT ================= -->
          <div class="form-section">
            <h5 class="section-title">Waktu dan Lokasi Kejadian</h5>

            <div class="mb-3">
              <label class="form-label">Tanggal Kejadian</label>
              {{ form.tanggal_kejadian }}
            </div>

            <div class="mb-3">
              <label class="form-label">Perkiraan Waktu</label>
              {{ form.perkiraan_waktu }}
            </div>

            <div class="mb-3">
              <label class="form-label">Lokasi Kejadian</label>
              {{ form.lokasi_kejadian }}
            </div>
          </div>

          <!-- ================= KRONOLOGI ================= -->
          <div class="form-section">
            <h5 class="section-title">
              Kronologi Kejadian *
            </h5>
            {{ form.isi_laporan }}
          </div>

          <!-- ================= DAMPAK ================= -->
          <div class="form-section">
            <h5 class="section-title">Dampak terhadap Korban</h5>

            <div class="checkbox-group">
              {{ form.dampak_korban }}
            </div>

            {{ form.dampak_lainnya }}
          </div>

          <!-- ================= BUKTI ================= -->
          <div class="form-section">
            <h5 class="section-title">Bukti Pendukung</h5>
            {{ form.bukti }}
          </div>

          <!-- ================= HARAPAN ================= -->
          <div class="form-section">
            <h5 class="section-title">Harapan Pelapor</h5>
            {{ form.harapan_pelapor }}
          </div>

          <!-- ================= PERNYATAAN ================= -->
          <div class="form-section">
            <h5 class="section-title">Pernyataan Kebenaran</h5>

            <div class="form-check">
              {{ form.pernyataan_setuju }}
              <label class="form-check-label">
                Saya menyatakan laporan ini benar dan dapat dipertanggungjawabkan
              </label>
            </div>
          </div>

          <!-- ================= SUBMIT ================= -->
          <button type="submit" class="btn btn-submit w-100">
            Kirim Laporan
          </button>

          <a href="{% url 'laporan_home' %}" class="btn btn-kembali w-100 mt-3">
            Kembali
          </a>

        </form>
      </div>
    </div>
  </section>
</div>
{% endblock %}
