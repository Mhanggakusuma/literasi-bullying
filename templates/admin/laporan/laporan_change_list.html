{% extends "admin/change_list.html" %}

{% block content %}

<h2>Dashboard Statistik Laporan Bullying</h2>

<form method="get" class="filter-bar">

<select name="jenis">
<option value="">Semua Jenis</option>
{% for val,label in jenis_choices %}
<option value="{{ val }}" {% if request.GET.jenis == val %}selected{% endif %}>
{{ label }}
</option>
{% endfor %}
</select>

<select name="kelas">
<option value="">Semua Kelas</option>
{% for val,label in kelas_choices %}
<option value="{{ val }}" {% if request.GET.kelas == val %}selected{% endif %}>
{{ label }}
</option>
{% endfor %}
</select>

<select name="status">
<option value="">Semua Status</option>
<option value="baru" {% if request.GET.status == "baru" %}selected{% endif %}>Baru</option>
<option value="diproses" {% if request.GET.status == "diproses" %}selected{% endif %}>Diproses</option>
<option value="selesai" {% if request.GET.status == "selesai" %}selected{% endif %}>Selesai</option>
</select>

<select name="periode" id="periodeSelect">
<option value="semua">Semua Waktu</option>
<option value="hari">Per Hari</option>
<option value="bulan">Per Bulan</option>
<option value="tahun">Per Tahun</option>
</select>

<input type="date" name="tanggal" id="filterTanggal">

<select name="bulan" id="filterBulan">
<option value="">Pilih Bulan</option>
{% for i in "123456789101112"|make_list %}
<option value="{{ forloop.counter }}">{{ forloop.counter }}</option>
{% endfor %}
</select>

<select name="tahun" id="filterTahun">
<option value="">Pilih Tahun</option>
{% for t in daftar_tahun %}
<option value="{{ t.year }}">{{ t.year }}</option>
{% endfor %}
</select>

<button type="submit">Filter</button>

</form>

<hr>

{{ block.super }}

<script>
const periode = document.getElementById("periodeSelect");
const tanggal = document.getElementById("filterTanggal");
const bulan = document.getElementById("filterBulan");
const tahun = document.getElementById("filterTahun");

function updateFilter(){
tanggal.style.display = "none";
bulan.style.display = "none";
tahun.style.display = "none";

if(periode.value === "hari"){
tanggal.style.display = "inline-block";
}

if(periode.value === "bulan"){
bulan.style.display = "inline-block";
tahun.style.display = "inline-block";
}

if(periode.value === "tahun"){
tahun.style.display = "inline-block";
}
}

periode.addEventListener("change", updateFilter);
updateFilter();
</script>

{% endblock %}
