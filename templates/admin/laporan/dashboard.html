{% extends "admin/base_site.html" %}

{% block content %}

<h1>Dashboard Analitik Laporan</h1>

<div style="display:grid; grid-template-columns:repeat(2,1fr); gap:20px;">

    <canvas id="jenisChart"></canvas>
    <canvas id="kelasChart"></canvas>
    <canvas id="statusChart"></canvas>
    <canvas id="waktuChart"></canvas>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

function chart(id, labels, data, label){
    new Chart(document.getElementById(id), {
        type:'bar',
        data:{
            labels:labels,
            datasets:[{label:label,data:data}]
        }
    });
}

chart("jenisChart",
    {{ jenis|safe }}.map(x=>x.jenis_bullying),
    {{ jenis|safe }}.map(x=>x.total),
    "Jenis Bullying"
);

chart("kelasChart",
    {{ kelas|safe }}.map(x=>x.kelas_korban),
    {{ kelas|safe }}.map(x=>x.total),
    "Kelas Korban"
);

chart("statusChart",
    {{ status|safe }}.map(x=>x.status),
    {{ status|safe }}.map(x=>x.total),
    "Status"
);

chart("waktuChart",
    {{ waktu|safe }}.map(x=>x.bulan),
    {{ waktu|safe }}.map(x=>x.total),
    "Tren Waktu"
);

</script>

{% endblock %}
