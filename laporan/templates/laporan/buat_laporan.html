{% extends "base.html" %}
{% load static %}

{% block title %}Formulir Laporan Bullying{% endblock %}

{% block content %}
<div class="buat-laporan-page">

  <!-- ================= HERO ================= -->
  <section class="buat-laporan-hero">
    <div class="container text-center">

      <h1 class="hero-title">Formulir Laporan Bullying</h1>
      <p class="hero-subtitle">
        Isi laporan sesuai kejadian yang dialami atau disaksikan
      </p>

      <!-- ================= FORM CARD ================= -->
      <div class="form-card mx-auto mt-5">

        <img src="{% static 'img/ribbon.png' %}" class="form-icon" alt="Icon">
        <h3 class="form-title">Laporkan Perundungan</h3>

        <form method="post" enctype="multipart/form-data" class="text-start">
          {% csrf_token %}

          <!-- ================= 1. IDENTITAS PELAPOR (READ ONLY) ================= -->
          <h5 class="mb-3">üîí Identitas Pelapor</h5>

          <div class="mb-3">
            <label class="form-label">Nama Pelapor</label>
            <input type="text" class="form-control"
                   value="{{ profile.user.get_full_name|default:profile.user.username }}"
                   readonly>
          </div>

          <div class="mb-3">
            <label class="form-label">NIS</label>
            <input type="text" class="form-control"
                   value="{{ profile.nis }}"
                   readonly>
          </div>

          <div class="mb-4">
            <label class="form-label">Kelas</label>
            <input type="text" class="form-control"
                   value="{{ profile.kelas }}"
                   readonly>
          </div>

          <!-- ANONIM -->
          <div class="form-check mb-4">
            {{ form.is_anonymous }}
            <label class="form-check-label">
              Laporkan sebagai anonim
            </label>
            <small class="d-block text-muted">
              Identitas hanya dapat diakses oleh Guru BK & Admin
            </small>
          </div>

          <hr class="my-4">

          <!-- ================= 2. IDENTITAS KORBAN ================= -->
          <h5 class="mb-3">üë§ Identitas Korban</h5>

          <div class="mb-3">
            <label class="form-label">Nama Korban</label>
            {{ form.nama_korban }}
            {% if form.nama_korban.errors %}
              <div class="text-danger small">{{ form.nama_korban.errors.0 }}</div>
            {% endif %}
          </div>

          <div class="mb-4">
            <label class="form-label">Kelas Korban</label>
            {{ form.kelas_korban }}
          </div>

          <hr class="my-4">

          <!-- ================= 3. IDENTITAS TERLAPOR ================= -->
          <h5 class="mb-3">‚ö†Ô∏è Identitas Terlapor (Opsional)</h5>

          <div class="mb-3">
            <label class="form-label">Nama Terlapor</label>
            {{ form.nama_terlapor }}
          </div>

          <div class="mb-4">
            <label class="form-label">Kelas Terlapor</label>
            {{ form.kelas_terlapor }}
          </div>

          <hr class="my-4">

          <!-- ================= 4. JENIS BULLYING ================= -->
          <h5 class="mb-3">üö® Jenis Perundungan</h5>

          <div class="mb-4">
            {{ form.jenis_bullying }}
          </div>

          <!-- ================= 5. KRONOLOGI ================= -->
          <h5 class="mb-3">üßæ Kronologi Kejadian</h5>

          <div class="mb-4">
            {{ form.isi_laporan }}
            <small class="text-muted">
              Gunakan bahasa sopan, hindari kata kasar, dan fokus pada kejadian
            </small>
          </div>

          <!-- ================= 6. BUKTI ================= -->
          <h5 class="mb-3">üìé Bukti Pendukung (Opsional)</h5>

          <div class="mb-4">
            {{ form.bukti }}
            <small class="text-muted">
              JPG / PNG / PDF ‚Ä¢ Maksimal 10 MB
            </small>
          </div>

          <!-- ================= SUBMIT ================= -->
          <button type="submit" class="btn btn-submit w-100">
            Kirim Laporan
          </button>

          <a href="{% url 'laporan_home' %}" class="btn btn-kembali w-100 mt-3">
            ‚Üê Kembali
          </a>

        </form>

      </div>
    </div>
  </section>

</div>
{% endblock %}
