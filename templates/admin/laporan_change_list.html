{% extends "admin/change_list.html" %}

{% block content %}

<h2>Dashboard Analitik Bullying</h2>

<p>
Total : {{ total_laporan }} |
Baru : {{ laporan_baru }} |
Diproses : {{ diproses }} |
Selesai : {{ selesai }}
</p>

<div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
<canvas id="statusChart"></canvas>
<canvas id="jenisChart"></canvas>
<canvas id="kelasChart"></canvas>
<canvas id="trenChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

document.addEventListener("DOMContentLoaded", function() {

new Chart(document.getElementById("statusChart"), {
type:'pie',
data:{
labels:[{% for i in grafik_status %}"{{ i.status }}",{% endfor %}],
datasets:[{data:[{% for i in grafik_status %}{{ i.total }},{% endfor %}]}]
}
});

new Chart(document.getElementById("jenisChart"), {
type:'bar',
data:{
labels:[{% for i in grafik_jenis %}"{{ i.jenis_bullying }}",{% endfor %}],
datasets:[{data:[{% for i in grafik_jenis %}{{ i.total }},{% endfor %}]}]
}
});

new Chart(document.getElementById("kelasChart"), {
type:'bar',
data:{
labels:[{% for i in grafik_kelas %}"{{ i.kelas_korban }}",{% endfor %}],
datasets:[{data:[{% for i in grafik_kelas %}{{ i.total }},{% endfor %}]}]
}
});

new Chart(document.getElementById("trenChart"), {
type:'line',
data:{
labels:[{% for i in grafik_tren %}"{{ i.waktu|date:'M Y' }}",{% endfor %}],
datasets:[{data:[{% for i in grafik_tren %}{{ i.total }},{% endfor %}]}]
}
});

});

</script>

{{ block.super }}

{% endblock %}
